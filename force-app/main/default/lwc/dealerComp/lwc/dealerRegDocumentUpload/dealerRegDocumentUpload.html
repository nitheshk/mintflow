<template>
  <c-spinner-utils visible={showSpinner} size="large"></c-spinner-utils>
  <lightning-card title="Upload Documents" icon-name="standard:document">
    <div class="slds-var-m-around_medium">
      <div class="slds-grid slds-wrap">
        <div
          class="
            slds-col
            slds-size_3-of-12
            slds-small-size_6-of-12
            slds-medium-size_3-of-12
            slds-var-p-around_medium
            slds-border_bottom
            slds-align_absolute-center
          "
        >
          <h2>Name</h2>
        </div>
        <div
          class="
            slds-col
            slds-size_4-of-12
            slds-small-size_6-of-12
            slds-medium-size_4-of-12
            slds-var-p-around_medium
            slds-border_bottom
            slds-align_absolute-center
          "
        >
          <h2>Upload File</h2>
        </div>
        <div
          class="
            slds-col
            slds-size_3-of-12
            slds-small-size_6-of-12
            slds-medium-size_3-of-12
            slds-var-p-around_medium
            slds-border_bottom
            slds-align_absolute-center
          "
        >
          <h2>File Name</h2>
        </div>
        <div
          class="
            slds-col
            slds-size_2-of-12
            slds-small-size_6-of-12
            slds-medium-size_2-of-12
            slds-var-p-around_medium
            slds-border_bottom
            slds-align_absolute-center
          "
        >
          <h2>Delete</h2>
        </div>

        <template for:each={docments} for:item="doc">
          <div
            key={doc.id}
            class="
              slds-col
              slds-size_3-of-12
              slds-small-size_6-of-12
              slds-medium-size_3-of-12
              slds-var-p-around_small
              slds-item_label
              slds-text-color_weak
              slds-align_absolute-center
            "
          >
            <h6>{doc.Name}</h6>
          </div>

          <div
            key={doc.id}
            class="
              slds-col
              slds-size_4-of-12
              slds-small-size_6-of-12
              slds-medium-size_4-of-12
              slds-var-p-around_small
              slds-align_absolute-center
            "
          >
            <lightning-file-upload
              data-id={doc.Id}
              label="Attach receipt"
              name="fileUploader"
              accept={acceptedFormats}
              record-id={doc.Id}
              file-field-name="dau01__Guest_Record_fileupload__c"
              file-field-value={doc.Id}
              onuploadfinished={handleUploadFinished}
            >
            </lightning-file-upload>
          </div>

          <div
            key={doc.id}
            class="
              slds-col
              slds-size_3-of-12
              slds-small-size_6-of-12
              slds-medium-size_3-of-12
              slds-var-p-around_small
              slds-align_absolute-center
            "
          >
            <h6>{doc.uploadedFileName}</h6>
          </div>

          <div
            key={doc.id}
            class="
              slds-col
              slds-size_2-of-12
              slds-small-size_6-of-12
              slds-medium-size_2-of-12
              slds-var-p-around_small
              slds-align_absolute-center
            "
          >
            <a>
              <lightning-icon
                data-id={doc.Id}
                icon-name="utility:delete"
                alternative-text="Delete"
                size="x-small"
                title="Delete"
                class="slds-var-p-around_small"
                onclick={handleDelete}
              ></lightning-icon>
            </a>
          </div>
        </template>
      </div>
    </div>
    <div class="slds-var-p-around_medium slds-float_right">
      <lightning-button-group>
        <lightning-button
          variant="brand"
          label="Prev"
          title="Prev"
          class="slds-var-m-left_x-small"
          icon-name="utility:back"
          icon-position="left"
          onclick={handlePrev}
        ></lightning-button>
        <lightning-button
          variant="brand"
          label="Finish"
          title="Finish"
          onclick={submitDealerInfo}
          class="slds-var-m-left_x-small"
          icon-name="utility:upload"
          icon-position="right"
        ></lightning-button>
      </lightning-button-group>
    </div>
  </lightning-card>
</template>
