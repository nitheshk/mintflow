<!-- sldsValidatorIgnore -->
<template>
  <template if:true={openModal}>
    <section
      role="dialog"
      tabindex="-1"
      class="slds-modal slds-fade-in-open slds-modal_large"
      aria-labelledby="modal-heading-01"
      aria-modal="true"
      aria-describedby="modal-content-id-1"
    >
      <div class="slds-modal__container">
        <header class="slds-modal__header slds-modal__header_empty">
          <lightning-button-icon
            icon-name="utility:close"
            alternative-text="Close this window"
            size="large"
            variant="bare-inverse"
            onclick={closeModal}
            class="slds-modal__close"
          >
          </lightning-button-icon>
        </header>
        <div class="slds-modal__content slds-p-around_medium" id="modal-content-id-1">
          <template if:true={iframeUrl}>
            <iframe
              src={iframeUrl}
              frameborder="0"
              height="100%"
              width="100%"
              style="overflow: hidden; height: calc(100vh - 150px)"
            ></iframe>
          </template>
        </div>
        <footer class="slds-modal__footer">
          <lightning-button icon-name="utility:close" label="close" variant="brand" onclick={closeModal}>
          </lightning-button>
        </footer>
      </div>
    </section>
    <div class="slds-backdrop slds-backdrop_open"></div>
  </template>

  <lightning-card variant="Narrow" title={title} icon-name="standard:document">
    <template if:true={isLoading}>
      <lightning-spinner alternative-text="Loading" size="small" variant="brand"></lightning-spinner>
    </template>
    <lightning-button
      if:true={showsync}
      variant="brand"
      title="Content Sync"
      icon-name="utility:sync"
      onclick={handleSync}
      slot="actions"
    >
    </lightning-button>
    <template if:true={showFileHeader}>
      <div class="slds-var-p-around_small">
        <div class="slds-grid slds-wrap">
          <div class="slds-col slds-size_1-of-4" if:true={showFilters}>
            <lightning-input
              if:true={showFilters}
              type="search"
              variant="standard"
              name="Title"
              label="Title"
              onchange={handleSearch}
            >
            </lightning-input>
          </div>
          <div class="slds-col slds-size_2-of-4 slds-var-p-left_small">
            <lightning-file-upload
              if:true={showFileUpload}
              label="Upload New File"
              name="fileUploader"
              accept={accept}
              record-id={recordId}
              onuploadfinished={handleUploadFinished}
              multiple
            >
            </lightning-file-upload>
          </div>
        </div>
      </div>
    </template>

    <div class="slds-var-p-around_xx-small">
      <lightning-datatable
        key-field="id"
        data={dataList}
        hide-checkbox-column
        columns={columnsList}
        onrowaction={handleRowAction}
        class="slds-table_header-fixed_container slds-table_bordered slds-border_top"
      >
      </lightning-datatable>
    </div>
  </lightning-card>
</template>
